<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Snake vs Computer</title>
<style>
  body { font-family: sans-serif; text-align:center; }
  canvas { background:#111; border:3px solid #333; border-radius:10px; }
  #scoreBoard { margin:10px; font-size:20px; font-weight:bold; }
</style>
</head>
<body>
<h2>üêç Snake vs Computer (AI)</h2>
<div id="scoreBoard">
  Player Score: <span id="playerScore">0</span> | AI Score: <span id="aiScore">0</span>
</div>
<canvas id="gameCanvas" width="500" height="500"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const tile = 20;
let playerScore = 0;
let aiScore = 0;

document.addEventListener("keydown", changeDirection);

let food = { x: 0, y: 0 };

// Player snake
let snake = [{x:10*tile, y:10*tile}];
let dx = tile, dy = 0;

// AI snake
let aiSnake = [{x:15*tile, y:15*tile}];
let aiDx = 0, aiDy = tile;

spawnFood();

function spawnFood() {
  food.x = Math.floor(Math.random() * (canvas.width/tile)) * tile;
  food.y = Math.floor(Math.random() * (canvas.height/tile)) * tile;
}

function changeDirection(e) {
  if(e.key === "ArrowUp" && dy===0) {dx=0; dy=-tile}
  if(e.key === "ArrowDown" && dy===0) {dx=0; dy=tile}
  if(e.key === "ArrowLeft" && dx===0) {dx=-tile; dy=0}
  if(e.key === "ArrowRight" && dx===0) {dx=tile; dy=0}
}

function aiMove() {
  let head = aiSnake[0];
  if(head.x < food.x) { aiDx = tile; aiDy = 0 }
  else if(head.x > food.x) { aiDx = -tile; aiDy = 0 }
  else if(head.y < food.y) { aiDx = 0; aiDy = tile }
  else if(head.y > food.y) { aiDx = 0; aiDy = -tile }
}

function detectCollision(snakeBody) {
  let head = snakeBody[0];
  for(let i=1;i<snakeBody.length;i++) {
    if(head.x===snakeBody[i].x && head.y===snakeBody[i].y) return true;
  }
  return head.x<0 || head.y<0 || head.x>=canvas.width || head.y>=canvas.height;
}

function detectSnakeHit() {
  let pHead = snake[0];
  let aiHead = aiSnake[0];
  return (pHead.x===aiHead.x && pHead.y===aiHead.y);
}

function update() {
  aiMove();
  // Ensure AI actively tracks food each frame

  let newHead = {x: snake[0].x + dx, y: snake[0].y + dy};
  snake.unshift(newHead);

  aiMove();
  let aiNewHead = {x: aiSnake[0].x + aiDx, y: aiSnake[0].y + aiDy};
  aiSnake.unshift(aiNewHead);

  if(newHead.x===food.x && newHead.y===food.y) {
    playerScore++;
    document.getElementById("playerScore").innerText = playerScore;
    spawnFood();
  } else snake.pop();

  if(aiNewHead.x===food.x && aiNewHead.y===food.y) {
    aiScore++;
    document.getElementById("aiScore").innerText = aiScore;
    spawnFood();
  } else aiSnake.pop();

  if(detectCollision(snake) || detectSnakeHit()) resetPlayer();
  if(detectCollision(aiSnake) || detectSnakeHit()) resetAI();
}

function resetPlayer() {
  snake = [{x:10*tile, y:10*tile}];
  dx = tile; dy = 0;
}

function resetAI() {
  aiSnake = [{x:15*tile, y:15*tile}];
  aiDx = 0; aiDy = tile;
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  
  ctx.fillStyle="lime";
  snake.forEach(s=>ctx.fillRect(s.x,s.y,tile,tile));

  ctx.fillStyle="red";
  aiSnake.forEach(s=>ctx.fillRect(s.x,s.y,tile,tile));

  ctx.fillStyle="yellow";
  ctx.fillRect(food.x,food.y,tile,tile);
}

function gameLoop() {
  update(); draw();
  setTimeout(gameLoop, 100);
}

function spawnFood() {
  food.x = Math.floor(Math.random() * (canvas.width/tile)) * tile;
  food.y = Math.floor(Math.random() * (canvas.height/tile)) * tile;
  aiMove();
}

gameLoop();
</script>
</body>
</html>
